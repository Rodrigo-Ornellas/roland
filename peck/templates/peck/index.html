{% extends 'peck/base.html' %}
{% load static %}
{% block corpo %}
<div id="home">
    <div class="cardd">
      <h2><i class="fas fa-bath"></i> PECK file upload</h2>

            <form method="POST" action="{% url 'peck:uploadfile' %}" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <!-- <label class="fileContainer">
                  Click here to select a file!
                    <input type="file" name="file" id="inputfile" />
                </label> -->
                <input type="file" name="file" id="inputfile" />
                <br>
                <br>
                <input type="submit" value="Upload" class="btn"/>
            </form>

          {% if err %}
          <p>{{ err }}</p>
          {% endif %}
    </div>

    <div class="cardd">
        {% if not busca %}
                <h2><i class="fas fa-search"></i> Search for CLIENTs or SERIAL Number</h2>
                <form method="get" action="{% url 'peck:search' %}">
                    Client(s): <input type="text" name="q" >
                    <input type="submit" value="buscar" >
                </form>
        {% else %}
                <h2>List of CLIENTs or SERIAL Numbers:</h2>
                <table>
                        <tr>
                                <th>Client</th>
                                <th>Company</th>
                                <th>Serial</th>
                                <th>Id</th>
                        </tr>
                    {% for maq in busca %}
                        <tr>
                                <td>{{ maq.contact }}</td>
                                <td>{{ maq.company }}</td>
                                <!-- <td><a href="../../../peck/report/{{ maq.serial }}/"/>{{ maq.serial }}</a></td> -->
                                <td><a href="{% url 'peck:report' maq.serial %}"/>{{ maq.serial }}</a></td>
                                <td>{{ maq.machine_id }}</td>
                        </tr>
                    {% endfor %}
                </table>
        {% endif %}
    </div>

    <div class="cardd" id="about">
        <h2><i class="fas fa-at"></i> About</h2>
        <img src="{% static './peck/img/roland5.png' %}" alt="roland logo">
        <p>This is a tool to help Roland clients to have a quick view of their printer's status based on the peck file the printer produces.</p>
    </div>
    <div class="cardd" id="disclaimer">
        <h2><i class="fab fa-black-tie"></i> Disclaimer</h2>
        <p>This is an experimental webtool. It has been developed based on the software developer's personal experience which has no professional or commercial relationship with Roland DGA Corporation. <br> <br>For official Roland documentation and information please contact Roland DGA Corporation official website at: <a href="https://www.rolanddga.com/  ">https://www.rolanddga.com/</a>.</p>
    </div>

    <div id="getgraph">

    </div>
</div>
<script type="text/javascript">
  var endpoint = 'peck/api/getgraph'
  $.ajax({
    method: "GET",
    url: endpoint,
    sucess: function(data) {
      console.log(data)
    },
    error:  function(eror_data){
      console.log("error")
      console.log(error_data)
    }
  })
</script>
{% endblock %}
